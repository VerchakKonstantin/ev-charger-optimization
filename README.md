# ev-charger-optimization

Структура проекта:  
* config.py  
Собранны все параметры для имитации работы зарядки.

* algorithms.py  
Файл с основными функциями get_min_hours и get_delta_load.

* main.py  
Скрипт для вызова и обёртки функций из algorithms.py

* optimum_load_data.xlsx  
Таблица с оптимальной нагрузкой по часам для зарядной станции, можно менять для тестирования на разных значениях.

Принципы работы функций:

* get_min_hours  
Модуль вычисления минимально необходимого времени зарядки для автомобиля, в зависимости от уже заряжающихся автомобилей (если такие имеются), возможностей ЭЗС и выбором пользователя.  
Выбор пользователя подразумевает собой выбор между более дорогим тарифом, и более дешевым. Функционально это делается выбор между стремлением зарядки не превышать оптимум, и между максимум, который может позволить ЭЗС. Расчёт идёт по очерёдности начала зарядки, т.е. больший приоритет отдаётся тому, кто приехал раньше.  
Алгоритм следующий:  
i = 1, j - номер машины  
Пока $E_{кон,j} \neq E_{i,j}:$
$$E_{ij}=E_{i-1,j}+E_{опт,i-1}.$$
Если $E_{i,j}>E_{кон,j}$ то $E_{ij}=E_{кон,j}$.  
После работы алгоритма выводится минимальное количество часов, необходимое для зарядки. Также пересчитываются значения доступной мощности для подачи на расчёт для следующей машины. Если первая машина забирает всю мощность в определенный час, то для следующей доступная мощность будет равна нулю.
Данный модуль будет использоваться как задание минимума времени зарядки для пользователя.

* get_delta_load  
Для расчётов используется условие, что невозможно поставить на зарядку несколько автомобилей одновременно, поэтому расчёт идет последовательно для каждого автомобиля по очереди в каждый момент времени.
Вводится $E_{iост}$ - показывает сколько мощности осталось от оптимальной/максимальной после вычитания прошлых машин.
Соответственно $E_{ост,i} <= E_{i,j} <= E_{опт,i} \vee E_{max,i}$.  
При $\frac{Eкj-Eij}{Tк-Ti} <= E_{ост,i} -> \Delta E_{ij}=Eкj-EijTк-Ti$,
При Eкj-EijTк-Ti>Eiост Eij=Eiост
Параметры максимальной мощности также вводятся условиями.

